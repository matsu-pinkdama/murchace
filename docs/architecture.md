# アーキテクチャ

murchace は注文商品の管理や処理に役立つクライアント・サーバシステムです。Web のインターフェースを通して、複数端末で注文の発行・管理を実現します。

## コードベースの全体像

FastAPI は `app/main.rs` を起点にサーバを立ち上げます。つまり、このファイルは他の全てのモジュールをインポートしています。

### `app/routers/`

パス操作を記述しています。HTTP リクエストが送られてきたら、必要な情報をデータベースから取得し、Jinja テンプレートをコンパイルして HTML を返します。DELETE メソッドだった場合のように、データベースに問い合わせなかったり、そもそもリスポンスとして HTML を返さないこともあります。

### `app/store/`

SQLite データベースのスキーマ、対応する Python クラス、データベースへの問い合わせロジックを記述しています。

### `app/templates/`

Jinja テンプレートを記述しています。テンプレートが受け取る引数をマクロで定義し、その引数を用いて動的に HTML を生成します。

## 懸念事項

### ブラウザ互換性

murchace は、ウェブブラウザを動かすことの出来る端末であれば、クライアントとしての運用が理論上は出来ます。しかし、ベンダーによって UI が崩れる可能性があり、全ての OS、デバイスをサポートするのは大変です。
クライアントは、主にタブレット端末での運用が想定されており、最低でも Safari は対応しておきたいです。細かい実装の違いで UI が想定外の挙動をしているときは、イシューを作成していただけるとありがたいです。
